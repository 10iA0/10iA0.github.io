<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><title>Horseman, pass by.</title><meta charset=utf-8><meta name=description content="Ladder@3 Virtual machines were prepared already. JDK, Hadoop have installed and environmental variables have configurated on them. If I want to use HDFS, MapReduce and YARN, I need to configurate them appropriate."><meta name=author content="Jihang XIAO"><link rel=canonical href=https://10iA0.github.io/blog/hadoop-running-a-cluster-configurate-a-cluster/><meta property="og:title" content="Hadoop-Running a cluster-Configurate a cluster (Core, HDFS, MapReduce and YARN)"><meta property="og:description" content="3 Virtual machines were prepared already. JDK, Hadoop have installed and environmental variables have configurated on them. If I want to use HDFS, MapReduce and YARN, I need to configurate them appropriate."><meta property="og:type" content="article"><meta property="og:url" content="https://10iA0.github.io/blog/hadoop-running-a-cluster-configurate-a-cluster/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-06-22T12:37:00+00:00"><meta property="article:modified_time" content="2021-06-22T12:37:00+00:00"><meta property="og:see_also" content="https://10iA0.github.io/blog/hadoop-running-a-cluster-start-and-stop-hdfs-and-yarn-automatically/"><meta property="og:see_also" content="https://10iA0.github.io/blog/hadoop-running-a-cluster-start-and-stop-functions-on-hdfs-and-yarn/"><meta property="og:see_also" content="https://10iA0.github.io/blog/hadoop-running-a-cluster-write-sync-scripts/"><meta property="og:see_also" content="https://10iA0.github.io/blog/hadoop-prerequisites-clone-3-systems-from-a-blueprint/"><meta property="og:see_also" content="https://10iA0.github.io/blog/hadoop-prerequisites-prepare-a-server-as-blueprint-/"><meta property="og:see_also" content="https://10iA0.github.io/blog/hadoop-running-a-cluster-start-and-stop-hdfs-and-yarn-automatically/"><meta property="og:see_also" content="https://10iA0.github.io/blog/hadoop-running-a-cluster-start-and-stop-functions-on-hdfs-and-yarn/"><meta property="og:see_also" content="https://10iA0.github.io/blog/hadoop-running-a-cluster-write-sync-scripts/"><meta property="og:see_also" content="https://10iA0.github.io/blog/hadoop-prerequisites-clone-3-systems-from-a-blueprint/"><meta property="og:see_also" content="https://10iA0.github.io/blog/hadoop-prerequisites-prepare-a-server-as-blueprint-/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hadoop-Running a cluster-Configurate a cluster (Core, HDFS, MapReduce and YARN)"><meta name=twitter:description content="3 Virtual machines were prepared already. JDK, Hadoop have installed and environmental variables have configurated on them. If I want to use HDFS, MapReduce and YARN, I need to configurate them appropriate."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Blogs","item":"https://10iA0.github.io/blog/"},{"@type":"ListItem","position":3,"name":"Hadoop-Running a cluster-Configurate a cluster (Core, HDFS, MapReduce and YARN)","item":"https://10iA0.github.io/blog/hadoop-running-a-cluster-configurate-a-cluster/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hadoop-Running a cluster-Configurate a cluster (Core, HDFS, MapReduce and YARN)","name":"Hadoop-Running a cluster-Configurate a cluster (Core, HDFS, MapReduce and YARN)","description":"3 Virtual machines were prepared already. JDK, Hadoop have installed and environmental variables have configurated on them. If I want to use HDFS, MapReduce and YARN, I need to configurate them appropriate.\n","keywords":["core-site.xml","hdfs-site.xml","yarn-site.xml","mapred-site.xml"],"articleBody":"3 Virtual machines were prepared already. JDK, Hadoop have installed and environmental variables have configurated on them. If I want to use HDFS, MapReduce and YARN, I need to configurate them appropriate.\nResourceManager highly requires using of memory. So, do not install NameNode, SecondaryNameNode and ResourceManager in a server.\nNameNode and SecondaryNameNode should not install in a server. Otherwise, the design of SecondaryNameNode is failed.\nhadoop102 hadoop103 hadoop104 HDFS NameNode, DataNode DataNode SecondaryNameNode, DataNode YARN NodeManager ResourceManager, NodeManager NodeManager Expand this table in another way.\nhadoop102 hadoop103 hadoop104 HDFS, YARN NameNode ResourceManager SecondaryNameNode HDFS DataNode DataNode DataNode YARN NodeManager NodeManager NodeManager configuration files There are 2 kinds of configuration files on : default and custom-edited.\nDefault configuration files deault fname pdir on Hadoop env core-deault.xml hadoop-common-3.1.3.jar/core-default.xml hdfs-deault.xml hadoop-hdfs-3.1.3.jar/hdfs-default.xml yarn-deault.xml hadoop-yarn-common-3.1.3.jar/yarn-default.xml mapred-deault.xml hadoop-mapreduce-client-core-3.1.3.jar/mapred-default.xml Custom-edited configuration files core-site.xml、hdfs-site.xml、yarn-site.xml、mapred-site.xml are stored in $HADOOP_HOME/etc/hadoop.\nconfigurate a cluster core-site.xml [jihang@hadoop102 ~]$ cd $HADOOP_HOME/etc/hadoop [jihang@hadoop102 hadoop]$ vim core-site.xml edit content:\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e \u003c?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?\u003e fs.defaultFS hdfs://hadoop102:9820 hadoop.tmp.dir /opt/module/hadoop-3.1.3/data hadoop.http.staticuser.user jihang hadoop.proxyuser.jihang.hosts * hadoop.proxyuser.jihang.groups * hadoop.proxyuser.jihang.groups * hdfs-site.xml [jihang@hadoop102 hadoop]$ vim hdfs-site.xml edit content:\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e \u003c?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?\u003e dfs.namenode.http-address hadoop102:9870 dfs.namenode.secondary.http-address hadoop104:9868 yarn-site.xml [jihang@hadoop102 hadoop]$ vim yarn-site.xml edit content:\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e \u003c?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?\u003e yarn.nodemanager.aux-services mapreduce_shuffle yarn.resourcemanager.hostname hadoop103 yarn.nodemanager.env-whitelist JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME yarn.scheduler.minimum-allocation-mb 512 yarn.scheduler.maximum-allocation-mb 4096 yarn.nodemanager.resource.memory-mb 4096 yarn.nodemanager.pmem-check-enabled false yarn.nodemanager.vmem-check-enabled false mapred-site.xml [jihang@hadoop102 hadoop]$ vim mapred-site.xml edit content\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e \u003c?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?\u003e mapreduce.framework.name yarn xsync configurated files on the cluster [jihang@hadoop102 hadoop]$ xsync /opt/module/hadoop-3.1.3/etc/hadoop/ check if configurated files on hadoop102 were cpoied to hadoop103 and hadoop104.\n[jihang@hadoop103 ~]$ cat /opt/module/hadoop-3.1.3/etc/hadoop/core-site.xml [jihang@hadoop104 ~]$ cat /opt/module/hadoop-3.1.3/etc/hadoop/core-site.xml ","wordCount":"348","inLanguage":"en","datePublished":"2021-06-22T12:37:00Z","dateModified":"2021-06-22T12:37:00Z","author":{"@type":"Person","name":"Jihang XIAO"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://10iA0.github.io/blog/hadoop-running-a-cluster-configurate-a-cluster/"},"publisher":{"@type":"Organization","name":"Horseman, pass by.","logo":{"@type":"ImageObject","url":"https://10iA0.github.io/favicon.ico"}}}</script><link rel=icon type=image/png href=/images/sun.png sizes=16x16><link rel=apple-touch-icon href=/images/sun.png><link rel=manifest href=/images/sun.png><link rel=stylesheet href=/css/main.min.64bc8c4cb2304e84167c1583fa1b5de80f6d5adc95abed2e616dea0ea5680e01.css integrity="sha256-ZLyMTLIwToQWfBWD+htd6A9tWtyVq+0uYW3qDqVoDgE=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.c098d85b5396dec4707ea2cead1445b4dc2ff0fc56b8dbbd9049d0d1c50ad237.js></script>
<script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand href=/></a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link href=/>Home</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/archives>Post</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/tags>Tags</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/about>About</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link href=https://github.com/10iA0><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li><li class="navigation-item navigation-language"><a href=https://10iA0.github.io/zh/>中</a></li></ul></section></nav><div id=content><article class=blog-single><header class=blog-title><h1>Hadoop-Running a cluster-Configurate a cluster (Core, HDFS, MapReduce and YARN)</h1></header><p><small>June 22, 2021&nbsp;· 348 words&nbsp;· 2 min</small>
<small>·
<a href=https://10iA0.github.io/tags/core-site.xml/>core-site.xml</a>
<a href=https://10iA0.github.io/tags/hdfs-site.xml/>hdfs-site.xml</a>
<a href=https://10iA0.github.io/tags/yarn-site.xml/>yarn-site.xml</a>
<a href=https://10iA0.github.io/tags/mapred-site.xml/>mapred-site.xml</a></small><p><div class=blog-toc><nav id=TableOfContents><ul><li><a href=#configuration-files>configuration files</a><ul><li><a href=#default-configuration-files>Default configuration files</a></li><li><a href=#custom-edited-configuration-files>Custom-edited configuration files</a></li></ul></li><li><a href=#configurate-a-cluster>configurate a cluster</a><ul><li><a href=#core-sitexml>core-site.xml</a></li><li><a href=#hdfs-sitexml>hdfs-site.xml</a></li><li><a href=#yarn-sitexml>yarn-site.xml</a></li><li><a href=#mapred-sitexml>mapred-site.xml</a></li></ul></li></ul></nav></div><section class=blog-content><p>3 Virtual machines were prepared already. JDK, Hadoop have installed and environmental variables have configurated on them. If I want to use <code>HDFS</code>, <code>MapReduce</code> and <code>YARN</code>, I need to configurate them appropriate.</p><p>ResourceManager highly requires using of memory. So, do not install NameNode, SecondaryNameNode and ResourceManager in a server.</p><blockquote><p>NameNode and SecondaryNameNode should not install in a server. Otherwise, the design of SecondaryNameNode is failed.</p></blockquote><table><thead><tr><th></th><th>hadoop102</th><th>hadoop103</th><th>hadoop104</th></tr></thead><tbody><tr><td>HDFS</td><td>NameNode, DataNode</td><td>DataNode</td><td>SecondaryNameNode, DataNode</td></tr><tr><td>YARN</td><td>NodeManager</td><td>ResourceManager, NodeManager</td><td>NodeManager</td></tr></tbody></table><p>Expand this table in another way.</p><table><thead><tr><th></th><th>hadoop102</th><th>hadoop103</th><th>hadoop104</th></tr></thead><tbody><tr><td>HDFS, YARN</td><td>NameNode</td><td>ResourceManager</td><td>SecondaryNameNode</td></tr><tr><td>HDFS</td><td>DataNode</td><td>DataNode</td><td>DataNode</td></tr><tr><td>YARN</td><td>NodeManager</td><td>NodeManager</td><td>NodeManager</td></tr></tbody></table><h2 id=configuration-files>configuration files</h2><p>There are 2 kinds of configuration files on : default and custom-edited.</p><h3 id=default-configuration-files>Default configuration files</h3><table><thead><tr><th>deault fname</th><th>pdir on Hadoop env</th></tr></thead><tbody><tr><td>core-deault.xml</td><td>hadoop-common-3.1.3.jar/core-default.xml</td></tr><tr><td>hdfs-deault.xml</td><td>hadoop-hdfs-3.1.3.jar/hdfs-default.xml</td></tr><tr><td>yarn-deault.xml</td><td>hadoop-yarn-common-3.1.3.jar/yarn-default.xml</td></tr><tr><td>mapred-deault.xml</td><td>hadoop-mapreduce-client-core-3.1.3.jar/mapred-default.xml</td></tr></tbody></table><h3 id=custom-edited-configuration-files>Custom-edited configuration files</h3><p>core-site.xml、hdfs-site.xml、yarn-site.xml、mapred-site.xml are stored in <code>$HADOOP_HOME/etc/hadoop</code>.</p><h2 id=configurate-a-cluster>configurate a cluster</h2><h3 id=core-sitexml>core-site.xml</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#f92672>[</span>jihang@hadoop102 ~<span style=color:#f92672>]</span>$ cd $HADOOP_HOME/etc/hadoop
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>jihang@hadoop102 hadoop<span style=color:#f92672>]</span>$ vim core-site.xml
</span></span></code></pre></div><p>edit content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>&lt;?xml version<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1.0&#34;</span> encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UTF-8&#34;</span>?&gt;
</span></span><span style=display:flex><span>&lt;?xml-stylesheet type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text/xsl&#34;</span> href<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;configuration.xsl&#34;</span>?&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;configuration&gt;
</span></span><span style=display:flex><span>	&lt;!-- 指定NameNode的地址 --&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;fs.defaultFS&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;hdfs://hadoop102:9820&lt;/value&gt;
</span></span><span style=display:flex><span>&lt;/property&gt;
</span></span><span style=display:flex><span>&lt;!-- 指定hadoop数据的存储目录 --&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;/opt/module/hadoop-3.1.3/data&lt;/value&gt;
</span></span><span style=display:flex><span>&lt;/property&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;!-- 配置HDFS网页登录使用的静态用户为jihang --&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;hadoop.http.staticuser.user&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;jihang&lt;/value&gt;
</span></span><span style=display:flex><span>&lt;/property&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;!-- 配置该jihang<span style=color:#f92672>(</span>superUser<span style=color:#f92672>)</span>允许通过代理访问的主机节点 --&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;hadoop.proxyuser.jihang.hosts&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;*&lt;/value&gt;
</span></span><span style=display:flex><span>&lt;/property&gt;
</span></span><span style=display:flex><span>&lt;!-- 配置该jihang<span style=color:#f92672>(</span>superUser<span style=color:#f92672>)</span>允许通过代理用户所属组 --&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;hadoop.proxyuser.jihang.groups&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;*&lt;/value&gt;
</span></span><span style=display:flex><span>&lt;/property&gt;
</span></span><span style=display:flex><span>&lt;!-- 配置该jihang<span style=color:#f92672>(</span>superUser<span style=color:#f92672>)</span>允许通过代理的用户--&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;hadoop.proxyuser.jihang.groups&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;*&lt;/value&gt;
</span></span><span style=display:flex><span>&lt;/property&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/configuration&gt;
</span></span></code></pre></div><h3 id=hdfs-sitexml>hdfs-site.xml</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#f92672>[</span>jihang@hadoop102 hadoop<span style=color:#f92672>]</span>$ vim hdfs-site.xml
</span></span></code></pre></div><p>edit content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>&lt;?xml version<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1.0&#34;</span> encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UTF-8&#34;</span>?&gt;
</span></span><span style=display:flex><span>&lt;?xml-stylesheet type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text/xsl&#34;</span> href<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;configuration.xsl&#34;</span>?&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;configuration&gt;
</span></span><span style=display:flex><span>	&lt;!-- nn web端访问地址--&gt;
</span></span><span style=display:flex><span>	&lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;hadoop102:9870&lt;/value&gt;
</span></span><span style=display:flex><span>    &lt;/property&gt;
</span></span><span style=display:flex><span>	&lt;!-- 2nn web端访问地址--&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;hadoop104:9868&lt;/value&gt;
</span></span><span style=display:flex><span>    &lt;/property&gt;
</span></span><span style=display:flex><span>&lt;/configuration&gt;
</span></span></code></pre></div><h3 id=yarn-sitexml>yarn-site.xml</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#f92672>[</span>jihang@hadoop102 hadoop<span style=color:#f92672>]</span>$ vim yarn-site.xml
</span></span></code></pre></div><p>edit content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>&lt;?xml version<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1.0&#34;</span> encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UTF-8&#34;</span>?&gt;
</span></span><span style=display:flex><span>&lt;?xml-stylesheet type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text/xsl&#34;</span> href<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;configuration.xsl&#34;</span>?&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;configuration&gt;
</span></span><span style=display:flex><span>	&lt;!-- 指定MR走shuffle --&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
</span></span><span style=display:flex><span>&lt;/property&gt;
</span></span><span style=display:flex><span>&lt;!-- 指定ResourceManager的地址--&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;hadoop103&lt;/value&gt;
</span></span><span style=display:flex><span>&lt;/property&gt;
</span></span><span style=display:flex><span>&lt;!-- 环境变量的继承 --&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;yarn.nodemanager.env-whitelist&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME&lt;/value&gt;
</span></span><span style=display:flex><span>&lt;/property&gt;
</span></span><span style=display:flex><span>&lt;!-- yarn容器允许分配的最大最小内存 --&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;yarn.scheduler.minimum-allocation-mb&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;512&lt;/value&gt;
</span></span><span style=display:flex><span>    &lt;/property&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;yarn.scheduler.maximum-allocation-mb&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;4096&lt;/value&gt;
</span></span><span style=display:flex><span>&lt;/property&gt;
</span></span><span style=display:flex><span>&lt;!-- yarn容器允许管理的物理内存大小 --&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;yarn.nodemanager.resource.memory-mb&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;4096&lt;/value&gt;
</span></span><span style=display:flex><span>&lt;/property&gt;
</span></span><span style=display:flex><span>&lt;!-- 关闭yarn对物理内存和虚拟内存的限制检查 --&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;yarn.nodemanager.pmem-check-enabled&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;false&lt;/value&gt;
</span></span><span style=display:flex><span>    &lt;/property&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;yarn.nodemanager.vmem-check-enabled&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;false&lt;/value&gt;
</span></span><span style=display:flex><span>    &lt;/property&gt;
</span></span><span style=display:flex><span>&lt;/configuration&gt;
</span></span></code></pre></div><h3 id=mapred-sitexml>mapred-site.xml</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#f92672>[</span>jihang@hadoop102 hadoop<span style=color:#f92672>]</span>$ vim mapred-site.xml
</span></span></code></pre></div><p>edit content</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>&lt;?xml version<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1.0&#34;</span> encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UTF-8&#34;</span>?&gt;
</span></span><span style=display:flex><span>&lt;?xml-stylesheet type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text/xsl&#34;</span> href<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;configuration.xsl&#34;</span>?&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;configuration&gt;
</span></span><span style=display:flex><span>	&lt;!-- 指定MapReduce程序运行在Yarn上 --&gt;
</span></span><span style=display:flex><span>    &lt;property&gt;
</span></span><span style=display:flex><span>        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
</span></span><span style=display:flex><span>        &lt;value&gt;yarn&lt;/value&gt;
</span></span><span style=display:flex><span>    &lt;/property&gt;
</span></span><span style=display:flex><span>&lt;/configuration&gt;
</span></span></code></pre></div><h4 id=xsync-configurated-files-on-the-cluster>xsync configurated files on the cluster</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#f92672>[</span>jihang@hadoop102 hadoop<span style=color:#f92672>]</span>$ xsync /opt/module/hadoop-3.1.3/etc/hadoop/
</span></span></code></pre></div><p>check if configurated files on hadoop102 were cpoied to hadoop103 and hadoop104.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#f92672>[</span>jihang@hadoop103 ~<span style=color:#f92672>]</span>$ cat /opt/module/hadoop-3.1.3/etc/hadoop/core-site.xml
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>jihang@hadoop104 ~<span style=color:#f92672>]</span>$ cat /opt/module/hadoop-3.1.3/etc/hadoop/core-site.xml
</span></span></code></pre></div></section><div class=paginator><a class=prev href=https://10iA0.github.io/blog/hadoop-running-a-cluster-start-and-stop-functions-on-hdfs-and-yarn/><span>&larr;&nbsp;&nbsp;</span><span>Hadoop-Running a cluster-Start and stop functions on HDFS and YARN</span></a>
<a class=next href=https://10iA0.github.io/blog/hadoop-running-a-cluster-write-sync-scripts/><span>Hadoop-Running a cluster-Write sync scripts</span><span>&nbsp;&nbsp;&rarr;</span></a></div><div class=related-resources><h3>Related Resources</h3><nav><ul><li><a href=/blog/hadoop-running-a-cluster-start-and-stop-hdfs-and-yarn-automatically/>Hadoop-Running a cluster-Start and stop HDFS and YARN automatically</a></li><li><a href=/blog/hadoop-running-a-cluster-start-and-stop-functions-on-hdfs-and-yarn/>Hadoop-Running a cluster-Start and stop functions on HDFS and YARN</a></li><li><a href=/blog/hadoop-running-a-cluster-write-sync-scripts/>Hadoop-Running a cluster-Write sync scripts</a></li><li><a href=/blog/hadoop-prerequisites-clone-3-systems-from-a-blueprint/>Hadoop-Prerequisites-Clone 3 systems from a blueprint</a></li><li><a href=/blog/hadoop-prerequisites-prepare-a-server-as-blueprint-/>Hadoop-Prerequisites-Prepare a server as blueprint</a></li></ul></nav><nav><ul><li><a href=/blog/hadoop-running-a-cluster-start-and-stop-hdfs-and-yarn-automatically/>Hadoop-Running a cluster-Start and stop HDFS and YARN automatically</a></li><li><a href=/blog/hadoop-running-a-cluster-start-and-stop-functions-on-hdfs-and-yarn/>Hadoop-Running a cluster-Start and stop functions on HDFS and YARN</a></li><li><a href=/blog/hadoop-running-a-cluster-write-sync-scripts/>Hadoop-Running a cluster-Write sync scripts</a></li><li><a href=/blog/hadoop-prerequisites-clone-3-systems-from-a-blueprint/>Hadoop-Prerequisites-Clone 3 systems from a blueprint</a></li><li><a href=/blog/hadoop-prerequisites-prepare-a-server-as-blueprint-/>Hadoop-Prerequisites-Prepare a server as blueprint</a></li></ul></nav></div></article></div><footer class=footer><p>&copy; 2022 <a href=https://10iA0.github.io>Horseman, pass by.</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-up"><line x1="12" y1="19" x2="12" y2="5"/><polyline points="5 12 12 5 19 12"/></svg></a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>